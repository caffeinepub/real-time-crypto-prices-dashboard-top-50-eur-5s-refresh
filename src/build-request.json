{
  "kind": "build_request",
  "title": "Switch crypto market data provider to CoinPaprika (with API key support)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-10",
      "text": "Replace the current CoinCap-based market data fetch in `frontend/src/features/crypto/useCryptoMarketData.ts` with CoinPaprika as the data provider, while keeping the existing dashboard behavior unchanged (top 50 by market cap rank, prices shown in EUR, auto-refresh every 5 seconds) and continuing to return the existing `CryptoAsset` shape consumed by `CryptoDashboard`.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user"
        ],
        "quotes": [
          "Kasuta CoinPaprika"
        ]
      },
      "acceptanceCriteria": [
        "The dashboard continues to render a table of 50 assets sorted by market cap rank (#1â€“#50).",
        "All displayed monetary values remain in EUR.",
        "React Query continues to refetch market data every 5 seconds while the page is open.",
        "`useCryptoMarketData()` still returns an array of `CryptoAsset` objects with fields: id, symbol, name, current_price, market_cap, market_cap_rank, price_change_percentage_24h, total_volume, image."
      ]
    },
    {
      "id": "REQ-11",
      "text": "Add configurable CoinPaprika API key support for the frontend market data request(s), and fail fast with a clear, developer-facing error message when the API key is missing or empty (do not silently fall back to another provider).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user"
        ],
        "quotes": [
          "Kasuta CoinPaprika"
        ]
      },
      "acceptanceCriteria": [
        "When the API key is missing/empty at runtime, the app surfaces an explicit error that indicates an API key is required for CoinPaprika (no generic \"Failed to fetch\" only).",
        "When a valid API key is provided, the browser request succeeds without CORS errors and the table populates with live data.",
        "No user-facing UI copy is added in any language other than English."
      ]
    },
    {
      "id": "REQ-12",
      "text": "Update the CoinPaprika-to-`CryptoAsset` mapping to ensure robust behavior when optional fields are missing (e.g., missing logo/image): provide a safe fallback image URL or a deterministic placeholder so the table does not break layout or crash on missing images.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user"
        ],
        "quotes": [
          "Kasuta CoinPaprika"
        ]
      },
      "acceptanceCriteria": [
        "If an asset image URL is missing or fails to load, the UI still renders rows without throwing errors.",
        "All rows in the table remain visually aligned even when some assets have no provider logo available."
      ]
    }
  ],
  "constraints": [
    "Do not modify files under `frontend/src/components/ui` (compose existing UI components instead).",
    "Do not modify files listed in SYSTEM_CONTEXT `frontend.immutablePaths`.",
    "Backend remains a single Motoko actor; no additional backend services."
  ],
  "nonGoals": [
    "Adding new dashboard features beyond switching the market data provider and required configuration/error handling.",
    "Changing refresh cadence, currency display (EUR), or the table columns/layout beyond what is required to keep the app working with CoinPaprika."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}